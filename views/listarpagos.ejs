<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> <%= pageTitle %> </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  </head>
  <body>
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
      <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
        <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
        <span class="fs-4">NewCombin Challenge</span>
      </a>

      <ul class="nav nav-pills">
        <li class="nav-item"><a href="/" class="nav-link" >Crear Boleta de Pago</a></li>
        <li class="nav-item"><a href="/pagar-boleta" class="nav-link">Pagar Boleta</a></li>
        <li class="nav-item"><a href="/listar-boletas" class="nav-link " aria-current="page">Boletas</a></li>
        <li class="nav-item"><a href="/listar-pagos" class="nav-link active">Pagos</a></li>
        
      </ul>
    </header>
    <div class="row">
        <div class="col">
            <div class="container mt-5 w-50 h-50">
                <h3>Listar Pagos</h3>
              </div>
              <div class="container mt-5 mb-5">

                <form method="POST" action="/filtrarFechasPagos">
                  <div class="row">
                    <div class="col">
                      <!-- Flatpickr -->
                    <input class="form-control" type="date" name="dateFlat" placeholder="Select dates">
                    <!-- End Flatpickr -->
                    </div>
                    <div class="col">
                      <button type="submit" class="btn btn-primary">Filtrar fechas</button>
                    </div>
                  </div>
                    
                    
                </form>
                
              </div>
              
              <div class="container w-75 h-75">
                <% if(pags.length > 0) { %>
                  <h6>Total Transacciones Acomuladas: <%= pags.length %> </h6> 
                  <div class="row">
                    <% for(let pago of pags) { %>
                        <div class="col">
                          <div class="card" style="width: 18rem;">
                            <div class="card-body">
                              <h5 class="card-title">Fecha de Pago: <strong><%= pago.fechapago %></strong></h5>
                              <h5 class="card-title">Importe Acomulado: <strong><%= pago.importepago %></strong></h5>
                            </div>
                          </div>
                        </div>
                      <% } %> 
                  </div>
                  <% } %>
              </div>
               
            
        </div>
        
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
      config = {
        altInput: true,
        altFormat: "F j, Y",
        dateFormat: "Y-m-d",
        mode: "range",

      }
      flatpickr("input[type=date]", config);
    </script>

    
  </body>
</html>